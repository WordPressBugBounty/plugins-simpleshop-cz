(()=>{var e={23:e=>{var t,o,s=9007199254740991,r=/^(?:0|[1-9]\d*)$/,l=Object.prototype,n=l.hasOwnProperty,i=l.toString,p=l.propertyIsEnumerable,a=(t=Object.keys,o=Object,function(e){return t(o(e))}),c=Math.max,u=!p.call({valueOf:1},"valueOf");function h(e,t,o){var s=e[t];n.call(e,t)&&f(s,o)&&(void 0!==o||t in e)||(e[t]=o)}function m(e,t){return!!(t=null==t?s:t)&&("number"==typeof e||r.test(e))&&e>-1&&e%1==0&&e<t}function d(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||l)}function f(e,t){return e===t||e!=e&&t!=t}var b=Array.isArray;function g(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}(e.length)&&!function(e){var t=v(e)?i.call(e):"";return"[object Function]"==t||"[object GeneratorFunction]"==t}(e)}function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}var _,S=(_=function(e,t){if(u||d(t)||g(t))!function(e,t,o){o||(o={});for(var s=-1,r=t.length;++s<r;){var l=t[s];h(o,l,e[l])}}(t,function(e){return g(e)?function(e,t){var o=b(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&g(e)}(e)&&n.call(e,"callee")&&(!p.call(e,"callee")||"[object Arguments]"==i.call(e))}(e)?function(e,t){for(var o=-1,s=Array(e);++o<e;)s[o]=t(o);return s}(e.length,String):[],s=o.length,r=!!s;for(var l in e)!t&&!n.call(e,l)||r&&("length"==l||m(l,s))||o.push(l);return o}(e):function(e){if(!d(e))return a(e);var t=[];for(var o in Object(e))n.call(e,o)&&"constructor"!=o&&t.push(o);return t}(e)}(t),e);else for(var o in t)n.call(t,o)&&h(e,o,t[o])},function(e,t){return t=c(void 0===t?e.length-1:t,0),function(){for(var o=arguments,s=-1,r=c(o.length-t,0),l=Array(r);++s<r;)l[s]=o[t+s];s=-1;for(var n=Array(t+1);++s<t;)n[s]=o[s];return n[t]=l,function(e,t,o){switch(o.length){case 0:return e.call(t);case 1:return e.call(t,o[0]);case 2:return e.call(t,o[0],o[1]);case 3:return e.call(t,o[0],o[1],o[2])}return e.apply(t,o)}(e,this,n)}}((function(e,t){var o=-1,s=t.length,r=s>1?t[s-1]:void 0,l=s>2?t[2]:void 0;for(r=_.length>3&&"function"==typeof r?(s--,r):void 0,l&&function(e,t,o){if(!v(o))return!1;var s=typeof t;return!!("number"==s?g(o)&&m(t,o.length):"string"==s&&t in o)&&f(o[t],e)}(t[0],t[1],l)&&(r=s<3?void 0:r,s=1),e=Object(e);++o<s;){var n=t[o];n&&_(e,n)}return e})));e.exports=S}},t={};function o(s){var r=t[s];if(void 0!==r)return r.exports;var l=t[s]={exports:{}};return e[s](l,l.exports,o),l.exports}o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=o(23),t=o.n(e);const s=window.React,r=window.wp.blocks,l=window.wp.i18n,n=window.wp.blockEditor,i=window.wp.components,p=window.ReactJSXRuntime,a={attributes:{ssFormId:{type:"string",default:"("+(0,l.__)("Choose the Product at the right panel","simpleshop-cz")+")"}},save:function({attributes:e,className:t}){const o="https://form.simpleshop.cz/iframe/js/?id="+e.ssFormId;return(0,p.jsx)("div",{class:"simpleshop-form",className:t,children:(0,p.jsx)("script",{type:"text/javascript",src:o})})}},{__experimentalGetSettings:c}=wp.date,{addFilter:u}=wp.hooks,{createHigherOrderComponent:h}=wp.compose;u("blocks.registerBlockType","simpleshop/attributes/custom",((e,o)=>(e.attributes=t()(e.attributes,{simpleShopGroup:{type:"string"},simpleShopGroups:{type:"array"},simpleShopIsMember:{type:"string"},simpleShopIsLoggedIn:{type:"string"},simpleShopIgnoreDates:{type:"bool"},simpleShopDaysToView:{type:"string"},simpleShopSpecificDateFrom:{type:"string",default:""},simpleShopSpecificDateTo:{type:"string"}}),e)));const m=h((e=>t=>{const{simpleShopGroup:o,simpleShopGroups:s,simpleShopIsMember:r,simpleShopIsLoggedIn:a,simpleShopIgnoreDates:u,simpleShopDaysToView:h,simpleShopSpecificDateFrom:m,simpleShopSpecificDateTo:d}=t.attributes;let f=c();const b=/a(?!\\)/i.test(f.formats.time.toLowerCase().replace(/\\\\/g,"").split("").reverse().join(""));let g=ssGutenbergVariables.groups,v=[];for(let e in g)v.push({label:g[e],value:e});let _=s;return void 0===s&&(_=o?[o]:[]),(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(e,{...t}),(0,p.jsx)(n.InspectorControls,{children:(0,p.jsxs)(i.PanelBody,{title:(0,l.__)("SimpleShop Settings","simpleshop-cz"),initialOpen:!0,children:[(0,p.jsx)("p",{children:(0,p.jsx)("a",{href:"https://podpora.redbit.cz/stitek/wp-plugin/",target:"_blank",children:(0,l.__)("Help - SimpleShop plugin","simpleshop-cz")})}),(0,p.jsx)(i.SelectControl,{label:(0,l.__)("The block will be visible to:","simpleshop-cz"),value:a,options:[{label:(0,l.__)("Choose","simpleshop-cz"),value:""},{label:(0,l.__)("Logged in user","simpleshop-cz"),value:"yes"},{label:(0,l.__)("Logged out user","simpleshop-cz"),value:"no"}],onChange:e=>{t.setAttributes({simpleShopIsLoggedIn:e}),e&&"no"!==e||t.setAttributes({simpleShopIsMember:"",simpleShopGroups:[]})}}),"yes"===a&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(i.SelectControl,{label:(0,l.__)("Membership","simpleshop-cz"),value:r,options:[{label:(0,l.__)("Choose","simpleshop-cz"),value:""},{label:(0,l.__)("Is a member of:","simpleshop-cz"),value:"yes"},{label:(0,l.__)("Is not a member of:","simpleshop-cz"),value:"no"}],onChange:e=>{t.setAttributes({simpleShopIsMember:e})}}),v.map((e=>(0,p.jsx)(i.ToggleControl,{label:e.label,checked:_.includes(e.value),onChange:o=>{const s=[..._];if(o)s.push(e.value);else{const t=s.indexOf(e.value);t>-1&&s.splice(t,1)}t.setAttributes({simpleShopGroups:s})}})))]}),(0,p.jsx)(i.TextControl,{label:(0,l.__)("Days to view","simpleshop-cz"),value:h,onChange:e=>{t.setAttributes({simpleShopDaysToView:e})}}),(0,p.jsx)(i.ToggleControl,{label:(0,l.__)("Ignore date limits","simpleshop-cz"),help:(0,l.__)("Check to completely disable limiting access to the content by date","simpleshop-cz"),checked:u,onChange:()=>t.setAttributes({simpleShopIgnoreDates:!u})}),!u&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("h4",{children:(0,l.__)("From date","simpleshop-cz")}),(0,p.jsx)(i.DateTimePicker,{label:(0,l.__)("From date","simpleshop-cz"),currentDate:m,value:m,onChange:e=>{t.setAttributes({simpleShopSpecificDateFrom:e})},is12Hour:b}),(0,p.jsx)("h4",{children:(0,l.__)("To date","simpleshop-cz")}),(0,p.jsx)(i.DateTimePicker,{label:(0,l.__)("To date","simpleshop-cz"),currentDate:d,value:d,onChange:e=>{t.setAttributes({simpleShopSpecificDateTo:e})},is12Hour:b})]})]})})]})}),"withInspectorControls");wp.hooks.addFilter("editor.BlockEdit","display-heading/with-inspector-controls",m),(0,r.registerBlockType)("simpleshop/simpleshop-form",{title:(0,l.__)("SimpleShop Form","simpleshop-cz"),icon:"shield",category:"common",keywords:[(0,l.__)("SimpleShop","simpleshop-cz"),(0,l.__)("Form","simpleshop-cz")],edit:e=>{const{attributes:t,setAttributes:o,className:r}=e,[a,c]=(0,s.useState)(!1),[u,h]=(0,s.useState)(null),m=()=>{let e=new FormData;e.append("action","load_simple_shop_products"),fetch(ajaxurl,{method:"post",body:e}).then((function(e){return c(!0),e.json()})).then((function(e){let t=[{label:(0,l.__)("Choose a product","simpleshop-cz"),value:""}];Object.keys(e).forEach((function(o){t.push({label:e[o],value:o})})),h(t)}))};return a||m(),(0,p.jsxs)("div",{className:r,children:[(0,p.jsxs)("div",{children:[(0,l.__)("SimpleShop Form","simpleshop-cz")," ",t.ssFormId]}),(0,p.jsx)(n.InspectorControls,{children:(0,p.jsx)(i.PanelBody,{children:a?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(i.SelectControl,{className:"simpleshop-form-select",label:(0,l.__)("SimpleShop Form","simpleshop-cz"),description:(0,l.__)("Select the SimpleShop Form","simpleshop-cz"),options:u,value:t.ssFormId,onChange:e=>o({ssFormId:e})}),(0,p.jsx)(i.Button,{onClick:()=>(c(!1),void m()),children:(0,l.__)("Reload forms","simpleshop-cz")})]}):(0,p.jsx)(p.Fragment,{children:"Loading"})})},"inspector")]})},save:()=>null,deprecated:[a]})})()})();